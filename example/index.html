<!DOCTYPE html>
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="../lib/formance.js"></script>

  <style type="text/css" media="screen">
    input.invalid {
      border: 2px solid red;
    }

    .validation.failed:after {
      color: red;
      content: 'Validation failed';
    }

    .validation.passed:after {
      color: green;
      content: 'Validation passed';
    }
  </style>

  <script>
    jQuery(function($){
      $('[data-numeric]').formance('restrictNumeric');
      $('.cc-number').formance('formatCreditCardNumber');
      $('.cc-exp').formance('formatCreditCardExpiry');
      $('.cc-cvc').formance('formatCreditCardCVC');

      $('form').submit(function(e){
        e.preventDefault();
        $('input').removeClass('invalid');
        $('.validation').removeClass('passed failed');

        var cardType = $.formance.cardType($('.cc-number').val());

        $('.cc-number').toggleClass('invalid', !$.formance.validateCreditCardNumber($('.cc-number').val()));
        $('.cc-exp').toggleClass('invalid', !$.formance.validateCreditCardExpiry($('.cc-exp').formance('cardExpiryVal')));
        $('.cc-cvc').toggleClass('invalid', !$.formance.validateCreditCardCVC($('.cc-cvc').val(), cardType));

        if ( $('input.invalid').length ) {
          $('.validation').addClass('failed');
        } else {
          $('.validation').addClass('passed');
        }
      });
    });
  </script>

</head>
<body>

  <form novalidate autocomplete="on">
    <h2>Card number formatting</h2>

    <input type="text" class="cc-number" pattern="\d*" x-autocompletetype="cc-number" placeholder="Card number" required>

    <h2>Expiry formatting</h2>

    <input type="text" class="cc-exp" pattern="\d*" x-autocompletetype="cc-exp" placeholder="Expires MM/YY" required maxlength="9">

    <h2>CVC formatting</h2>
    <input type="text" class="cc-cvc" pattern="\d*" x-autocompletetype="cc-csc" placeholder="Security code" required  autocomplete="off">

    <h2>Restrict Numeric</h2>

    <input type="text" data-numeric>

    <h2 class="validation"></h2>

    <button type="submit">Submit</button>
  </form>

</body>
</html>